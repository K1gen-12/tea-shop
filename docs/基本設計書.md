# 基本設計書：日本茶ECプラットフォーム「深茶（Fukamicha）」

## 1. プロジェクト概要

### 1.1 プロジェクト名
日本茶ブランド「深茶（Fukamicha）」Webサイトリニューアル

### 1.2 ビジョン
**「伝統と現代の融合」**
老舗茶舗としての絶対的な信頼感を保ちつつ、若い世代や海外ユーザー（インバウンド含む）にも「選びやすく」「親しみやすい」モダンな購入体験を提供する。

### 1.3 目的
1.  **ブランド価値の向上**: 「和」の美意識と現代的なWebデザインを融合し、没入感のあるブランド体験を創出する。
2.  **選びにくさの解消**: お茶特有の「味の違い」を可視化（レーダーチャートなどの導入）し、直感的な商品選択を可能にする。
3.  **ギフト需要の取り込み**: 熨斗（のし）や名入れ、ラッピングなどの細かい要望にWeb上で完結できるUIを提供する。

### 1.4 ターゲットユーザー
*   **メイン層**: 全年代の日本人ユーザー
*   **サブ層**: 日本文化に関心の高い若年層、海外ユーザー
*   **コアバリュー**: 「信頼感 (Trust)」「読みやすさ (Readability)」「丁寧さ (Politeness)」

---

## 2. 技術スタック

*   **Framework**: Next.js (App Router)
*   **Language**: TypeScript
*   **Styling**: Tailwind CSS (デザインシステム `docs/design-system.xml` に完全準拠)
*   **State Management**: React Context または Zustand (カート・ギフト設定管理)
*   **CMS**: MicroCMS または Supabase (商品カタログ・記事管理)
*   **Infrastructure**: Vercel または Cloudflare Pages

### 2.1 ディレクトリ構成 (Directory Structure)

```text
.
├── public/                 # 静的ファイル
├── src/
│   ├── app/                # App Router
│   │   ├── (marketing)/    # トップ、About、Journalなど
│   │   ├── (shop)/         # 商品一覧、詳細、カート
│   │   │   ├── products/
│   │   │   └── checkout/
│   │   ├── api/            # Route Handlers
│   │   ├── globals.css     # グローバルスタイル
│   │   └── layout.tsx      # ルートレイアウト
│   ├── components/         # コンポーネント
│   │   ├── ui/             # 汎用 UI (Atoms/Molecules)
│   │   ├── features/       # 機能単位 (Organisms)
│   │   └── layouts/        # ヘッダー、フッター
│   ├── lib/                # ユーティリティ
│   │   └── utils.ts
│   ├── types/              # 型定義
│   └── hooks/              # カスタムフック
├── docs/                   # 設計書等
└── next.config.js
```

---

## 3. デザインシステム（概要）

`docs/design-system.xml` を正（Source of Truth）とし、以下のルールを厳守する。

### 3.1 カラーパレット
*   **Deep Tea Green (`#2A4036`)**: 濃茶。信頼感、フッター背景、ホバー時のボタン色。
*   **Matcha Green (`#4B6E5B`)**: 抹茶。プライマリアクション（ボタン）、リンク色。
*   **Hojicha Brown (`#8D5A34`)**: 焙じ茶。アクセント、重要なお知らせ、ホバー時のリンク色。
*   **Washi White (`#F9F9F9`)**: 和紙白。ベース背景色（純白 `#FFFFFF` はカード背景などに限定）。

### 3.2 タイポグラフィ
日本語の可読性を最優先する。
*   **見出し (Headings)**: 明朝体 (`Shippori Mincho`, `Yu Mincho`)。トラッキング広め (`0.1em`) で高級感を演出。
*   **本文 (Body)**: ゴシック体 (`Zen Kaku Gothic New`, `Yu Gothic`)。行間広め (`line-height: 1.8`) で読みやすさを重視。
*   **アクセント**: 英数字の一部に `Cormorant Garamond` を使用。

### 3.3 レイアウト原則
*   **「間（Ma）」**: 余白を大胆に取り、情報を詰め込みすぎない。セクション間は `120px` 程度確保。
*   **縦書きアクセント**: ヒーローセクションのコピーや、見出し（h2）の一部に `writing-mode: vertical-rl` を使用し、和の雰囲気を強調。

---

## 4. サイトマップ詳細

### 1. HOME (トップページ)
*   **First View**: 動画または高画質画像を背景に、縦書きキャッチコピーを配置。
*   **Seasonal Recommend**: 季節のおすすめ（新茶、水出し茶など）。
*   **Journal Pickup**: 最新の読み物記事への導線。

### 2. PRODUCTS (商品一覧・検索)
*   **Categorization**: カテゴリタブ（煎茶、玉露、抹茶、茶器）。
*   **Taste Search**: **味覚チャート検索機能**（甘み・渋み・旨み・香りから絞り込み）。
*   **Scene Search**: シーン別提案（朝の目覚め、午後の休憩、贈り物）。

### 3. PRODUCT DETAIL (商品詳細)
*   **Gallery**: 商品画像ギャラリー。
*   **Taste Radar Chart**: 味覚レーダーチャート表示（コンポーネント実装）。
*   **Brewing Guide**: おいしい淹れ方の説明。
*   **Related Items**: ペアリング提案（お菓子など）。

### 4. JOURNAL (読み物)
*   **Categories**: おいしい淹れ方、茶園レポート、ペアリング日記。
*   **Article View**: リッチテキスト表示、関連商品へのリンク。

### 5. ABOUT (店舗紹介)
*   **Story**: 創業ストーリー、歴史。
*   **Philosophy**: お茶へのこだわり、生産者への想い。

### 6. CART / CHECKOUT (購入フロー)
*   **Guest Checkout**: 会員登録なしでの購入に対応。
*   **Gift Settings**: **詳細ギフト設定**（熨斗の種類選択、表書き・名入れ入力、手提げ袋の有無）。

---

## 5. 機能要件 (Functional Requirements)

### 5.1 UI/UX・演出
*   **マイクロインタラクション**:
    *   ボタンホバー：背景色がゆっくり満ちる、枠線が動くなど（Duration 300ms-500ms）。
    *   スクロール：画像出現時のパララックス効果、テキストのフェードイン。
*   **縦書き実装**: CSS `writing-mode: vertical-rl` を適切に使用。

### 5.2 商品選びの機能
*   **味覚レーダーチャート**:
    *   `Recharts` または `Chart.js` を使用。
    *   軸：甘み、渋み、旨み、香り、色（水色）。
    *   デザイン：細い線描、和の色使い。

### 5.3 ギフト対応機能
*   **UI**: プルダウンではなく、熨斗の実際のデザインに近い「カード形式」で選択させる。
*   **Live Preview**: 名入れ入力時に、プレビューが表示されると望ましい。

---

## 6. データモデル設計概略

### Product (商品)
```typescript
interface Product {
  id: string;
  name: string; // 商品名
  price: number; // 価格
  description: string; // 商品説明
  category: 'sencha' | 'gyokuro' | 'matcha' | 'tool';
  tags: string[]; // 'morning', 'gift' etc.
  taste_profile: {
    sweetness: number; // 1-5
    bitterness: number;
    umami: number;
    fragrance: number;
  };
  images: string[];
  stock_status: 'in_stock' | 'out_of_stock' | 'limited';
}
```

### Article (記事)
```typescript
interface Article {
  id: string;
  title: string;
  content: string; // HTML or Markdown
  published_at: string;
  related_products: string[]; // Product IDs
}
```

---

## 7. 非機能要件

*   **Performance**: Core Web Vitals (LCP, CLS) を重視。画像は `next/image` で最適化し、遅延読み込みを徹底する。
*   **Accessibility**: WCAG 2.1 レベル AA 準拠を目指す。特に背景色と文字色のコントラスト比（4.5:1以上）を確保。スクリーンリーダー対応。
*   **SEO**: セマンティックなHTML構造 (`article`, `section` 等)。各ページへの構造化データ（Product, Article）埋め込み。
